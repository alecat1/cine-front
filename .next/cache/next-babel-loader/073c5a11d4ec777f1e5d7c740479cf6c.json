{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\lopezvalenzuela.16\\\\Documents\\\\GitHub\\\\tp-tiktok-front\\\\src\\\\components\\\\bubble\\\\bubble.js\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { Cookies } from 'react-cookie';\nimport axios from 'axios';\nimport './bubble.css';\nimport Local from '../../local';\nimport Global from '../../global';\nimport swal from 'sweetalert';\n\nvar jwtDecode = require('jwt-decode');\n\nvar cookies = new Cookies();\n\nvar Bubble = function Bubble() {\n  var _useState = useState(),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(),\n      params = _useState2[0],\n      setParams = _useState2[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var token, decoded, res;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(cookies.get('token'));\n\n            case 2:\n              token = _context.sent;\n\n              if (token != undefined) {\n                decoded = jwtDecode(token);\n                setParams(decoded.id);\n              }\n\n              _context.prev = 4;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(axios.post(Global.url + 'home', {\n                headers: {\n                  'access-token': token,\n                  'key-token': 'codekey:!m@!K3CjDz*NdInr7Q773u3hj*G%5Kl$zZ^%Uz%Z5v#jf2humR'\n                }\n              }));\n\n            case 7:\n              res = _context.sent;\n              _context.next = 12;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](4);\n\n            case 12:\n              decoded && axios.post(Global.url + 'actual-state', {\n                ccms: decoded.id\n              }).then(function (res) {\n                res.status === 204 ? setState(true) : setState(false);\n              })[\"catch\"](function (err) {\n                window.location.reload();\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[4, 10]], Promise);\n    })();\n  }, [state]);\n  return state ? __jsx(\"div\", {\n    tag: \"a\",\n    className: \"bubble-page rotate-in-center\",\n    onClick: function onClick() {\n      axios.post(Global.url + 'delete-state', {\n        ccms: params\n      }).then(function () {\n        var url = Local.url + 'news';\n        location.href = url;\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"!!!\")) : null;\n};\n\nexport default Bubble;","map":{"version":3,"sources":["C:/Users/lopezvalenzuela.16/Documents/GitHub/tp-tiktok-front/src/components/bubble/bubble.js"],"names":["React","useEffect","useState","Cookies","axios","Local","Global","swal","jwtDecode","require","cookies","Bubble","state","setState","params","setParams","get","token","undefined","decoded","id","post","url","headers","res","ccms","then","status","err","window","location","reload","href"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AACA,IAAIC,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAMC,OAAO,GAAG,IAAIP,OAAJ,EAAhB;;AAEA,IAAMQ,MAAM,GAAG,SAATA,MAAS,GAAM;AAAA,kBACOT,QAAQ,EADf;AAAA,MACZU,KADY;AAAA,MACLC,QADK;;AAAA,mBAESX,QAAQ,EAFjB;AAAA,MAEZY,MAFY;AAAA,MAEJC,SAFI;;AAInBd,EAAAA,SAAS,CAAC,YAAM;AACd,KAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACqBS,OAAO,CAACM,GAAR,CAAY,OAAZ,CADrB;;AAAA;AACOC,cAAAA,KADP;;AAGC,kBAAIA,KAAK,IAAIC,SAAb,EAAwB;AACtBC,gBAAAA,OAAO,GAAGX,SAAS,CAACS,KAAD,CAAnB;AACAF,gBAAAA,SAAS,CAACI,OAAO,CAACC,EAAT,CAAT;AACD;;AANF;AAAA;AAAA,+CAQqBhB,KAAK,CAACiB,IAAN,CAAWf,MAAM,CAACgB,GAAP,GAAa,MAAxB,EAAgC;AAChDC,gBAAAA,OAAO,EAAE;AACP,kCAAgBN,KADT;AAEP,+BAAa;AAFN;AADuC,eAAhC,CARrB;;AAAA;AAQSO,cAAAA,GART;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAeCL,cAAAA,OAAO,IACLf,KAAK,CACFiB,IADH,CACQf,MAAM,CAACgB,GAAP,GAAa,cADrB,EACqC;AACjCG,gBAAAA,IAAI,EAAEN,OAAO,CAACC;AADmB,eADrC,EAIGM,IAJH,CAIQ,UAACF,GAAD,EAAS;AACbA,gBAAAA,GAAG,CAACG,MAAJ,KAAe,GAAf,GAAqBd,QAAQ,CAAC,IAAD,CAA7B,GAAsCA,QAAQ,CAAC,KAAD,CAA9C;AACD,eANH,WAOS,UAACe,GAAD,EAAS;AACdC,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,eATH,CADF;;AAfD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AA2BD,GA5BQ,EA4BN,CAACnB,KAAD,CA5BM,CAAT;AA8BA,SAAOA,KAAK,GACV;AACE,IAAA,GAAG,EAAC,GADN;AAEE,IAAA,SAAS,EAAC,8BAFZ;AAGE,IAAA,OAAO,EAAE,mBAAM;AACbR,MAAAA,KAAK,CACFiB,IADH,CACQf,MAAM,CAACgB,GAAP,GAAa,cADrB,EACqC;AACjCG,QAAAA,IAAI,EAAEX;AAD2B,OADrC,EAIGY,IAJH,CAIQ,YAAM;AACV,YAAIJ,GAAG,GAAGjB,KAAK,CAACiB,GAAN,GAAY,MAAtB;AACAQ,QAAAA,QAAQ,CAACE,IAAT,GAAgBV,GAAhB;AACD,OAPH;AAQD,KAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAdF,CADU,GAiBR,IAjBJ;AAkBD,CApDD;;AAsDA,eAAeX,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Cookies } from 'react-cookie';\r\nimport axios from 'axios';\r\nimport './bubble.css';\r\nimport Local from '../../local';\r\nimport Global from '../../global';\r\nimport swal from 'sweetalert';\r\nvar jwtDecode = require('jwt-decode');\r\nconst cookies = new Cookies();\r\n\r\nconst Bubble = () => {\r\n  const [state, setState] = useState();\r\n  const [params, setParams] = useState();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const token = await cookies.get('token');\r\n      let decoded;\r\n      if (token != undefined) {\r\n        decoded = jwtDecode(token);\r\n        setParams(decoded.id)\r\n      }\r\n      try {\r\n        const res = await axios.post(Global.url + 'home', {\r\n          headers: {\r\n            'access-token': token,\r\n            'key-token': 'codekey:!m@!K3CjDz*NdInr7Q773u3hj*G%5Kl$zZ^%Uz%Z5v#jf2humR',\r\n          },\r\n        });\r\n      } catch (err) {}\r\n      decoded &&\r\n        axios\r\n          .post(Global.url + 'actual-state', {\r\n            ccms: decoded.id,\r\n          })\r\n          .then((res) => {\r\n            res.status === 204 ? setState(true) : setState(false);\r\n          })\r\n          .catch((err) => {\r\n            window.location.reload();\r\n          });\r\n    })();\r\n  }, [state]);\r\n\r\n  return state ? (\r\n    <div\r\n      tag='a'\r\n      className='bubble-page rotate-in-center'\r\n      onClick={() => {\r\n        axios\r\n          .post(Global.url + 'delete-state', {\r\n            ccms: params,\r\n          })\r\n          .then(() => {\r\n            let url = Local.url + 'news';\r\n            location.href = url;\r\n          });\r\n      }}\r\n    >\r\n      <p>!!!</p>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nexport default Bubble;\r\n"]},"metadata":{},"sourceType":"module"}